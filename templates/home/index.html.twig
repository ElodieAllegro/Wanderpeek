{% extends 'base.html.twig' %}

{% block title %}Accueil - Wanderpeek{% endblock %}

{% block body %}
<!-- Hero Section -->
<section class="bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">Trouvez votre logement idéal</h1>
                <p class="lead mb-4">Découvrez des milliers d'hébergements uniques partout en France. Réservez en toute confiance avec Wanderpeek.</p>
                <a href="{{ path('app_listing_index') }}" class="btn btn-light btn-lg">
                    <i class="fas fa-search me-2"></i>Explorer les annonces
                </a>
            </div>
            <div class="col-lg-6">
                <img src="https://images.pexels.com/photos/1134176/pexels-photo-1134176.jpeg?auto=compress&cs=tinysrgb&w=600" 
                     alt="Hébergement" class="img-fluid rounded shadow">
            </div>
        </div>
    </div>
</section>

<!-- Search Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow">
                    <div class="card-body">
                        <form action="{{ path('app_listing_index') }}" method="GET">
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <label for="city" class="form-label">Destination</label>
                                    <input type="text" class="form-control" id="city" name="city" placeholder="Ville...">
                                </div>
                                <div class="col-md-3">
                                    <label for="category" class="form-label">Type</label>
                                    <select class="form-control" id="category" name="category">
                                        <option value="">Tous types</option>
                                        <option value="apartment">Appartement</option>
                                        <option value="house">Maison</option>
                                        <option value="studio">Studio</option>
                                        <option value="villa">Villa</option>
                                        <option value="room">Chambre</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label for="maxPrice" class="form-label">Prix max/nuit</label>
                                    <input type="number" class="form-control" id="maxPrice" name="maxPrice" placeholder="€">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label">&nbsp;</label>
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Listings -->
{% if featured_listings %}
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Hébergements populaires</h2>
        <div class="row">
            {% for listing in featured_listings %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 shadow-sm">
                        {% if listing.mainImage %}
                            <img src="{{ asset('uploads/listings/' ~ listing.mainImage) }}" 
                                 class="card-img-top listing-image" alt="{{ listing.title }}">
                        {% else %}
                            <img src="https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg?auto=compress&cs=tinysrgb&w=400&h=300&fit=crop" 
                                 class="card-img-top listing-image" alt="{{ listing.title }}">
                        {% endif %}
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ listing.title }}</h5>
                            <p class="card-text text-muted">{{ listing.city }}, {{ listing.country }}</p>
                            <p class="card-text">{{ listing.description|slice(0, 100) }}...</p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="h5 text-primary mb-0">{{ listing.pricePerNight }}€/nuit</span>
                                    <small class="text-muted">
                                        <i class="fas fa-users me-1"></i>{{ listing.maxGuests }} pers.
                                    </small>
                                </div>
                                <a href="{{ path('app_listing_show', {id: listing.id}) }}" 
                                   class="btn btn-primary w-100 mt-2">Voir détails</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{{ path('app_listing_index') }}" class="btn btn-outline-primary">
                Voir toutes les annonces <i class="fas fa-arrow-right ms-1"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">Pourquoi choisir Wanderpeek ?</h2>
        <div class="row">
            <div class="col-md-4 text-center mb-4">
                <div class="mb-3">
                    <i class="fas fa-shield-alt fa-3x text-primary"></i>
                </div>
                <h4>Sécurisé</h4>
                <p class="text-muted">Tous nos hébergements sont vérifiés et nos paiements sont sécurisés.</p>
            </div>
            <div class="col-md-4 text-center mb-4">
                <div class="mb-3">
                    <i class="fas fa-clock fa-3x text-primary"></i>
                </div>
                <h4>Disponible 24h/24</h4>
                <p class="text-muted">Notre service client est disponible à tout moment pour vous aider.</p>
            </div>
            <div class="col-md-4 text-center mb-4">
                <div class="mb-3">
                    <i class="fas fa-heart fa-3x text-primary"></i>
                </div>
                <h4>Expérience unique</h4>
                <p class="text-muted">Découvrez des logements authentiques et vivez comme un local.</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5 bg-primary text-white">
    <div class="container text-center">
        <h2 class="mb-4">Prêt à commencer votre aventure ?</h2>
        <p class="lead mb-4">Rejoignez des milliers de voyageurs qui font confiance à Wanderpeek</p>
        <div class="row justify-content-center">
            <div class="col-auto">
                <a href="{{ path('app_register') }}" class="btn btn-light btn-lg me-3">
                    <i class="fas fa-user-plus me-2"></i>S'inscrire
                </a>
                <a href="{{ path('app_listing_new') }}" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-plus me-2"></i>Publier une annonce
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}